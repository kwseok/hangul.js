!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.hangul=e():t.hangul=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return t[r].call(u.exports,u,u.exports,e),u.loaded=!0,u.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),o=r(u),f=n(2),i=r(f),a=n(4),l=r(a),d=n(6),c=r(d),s=n(8),p=r(s),g=n(9),h=r(g),_=n(10),y=r(_);e["default"]={is:o["default"],initial:i["default"],vowel:l["default"],under:c["default"],hasUnder:p["default"],hasLastUnder:h["default"],formatNumber:y["default"]},String.prototype.isHangul=function(t){return(0,o["default"])(this.toString(),t)},String.prototype.hangulInitial=function(){return(0,i["default"])(this.toString())},String.prototype.hangulVowel=function(){return(0,l["default"])(this.toString())},String.prototype.hangulUnder=function(){return(0,c["default"])(this.toString())},String.prototype.hasHangulUnder=function(){return(0,p["default"])(this.toString())},String.prototype.hasLastHangulUnder=function(){return(0,h["default"])(this.toString())},String.prototype.toHangulNumber=function(t){return(0,y["default"])(this.toString(),t)},Number.prototype.toHangul=function(t){return(0,y["default"])(this.toString(),t)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){if("string"!=typeof t||0===t.length)return!1;(!e||0>e||e>t.length)&&(e=t.length);for(var n=0;e>n;n++){var r=t.charCodeAt(n);if(44032>r||r>55203)return!1}return!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return(0,o["default"])(t,1)?i["default"][parseInt(((65535&t.charCodeAt(0))-44032)/588)]:"string"==typeof t?t.charAt(0):t};var u=n(1),o=r(u),f=n(3),i=r(f)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return(0,o["default"])(t,1)?i["default"][parseInt(((65535&t.charCodeAt(0))-44032)%588/28)]:"string"==typeof t?t.charAt(0):t};var u=n(1),o=r(u),f=n(5),i=r(f)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return(0,o["default"])(t,1)?i["default"][parseInt(((65535&t.charCodeAt(0))-44032)%588%28)]:"string"==typeof t?t.charAt(0):t};var u=n(1),o=r(u),f=n(7),i=r(f)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return(0,o["default"])(t,1)&&""!==(0,i["default"])(t)};var u=n(1),o=r(u),f=n(6),i=r(f)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return"string"!=typeof t||0===t.length?!1:(0,o["default"])(t.charAt(t.length-1))};var u=n(8),o=r(u)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){if("undefined"==typeof t)throw new TypeError("'number' is undefined");if("string"!=typeof t&&(t=t.toString()),!/^[0-9]+$/.test(t))return t;if("0"===t.charAt(0))for(var n=1;n<t.length;n++)if("0"!==t.charAt(n)){t=t.substring(n);break}if(0===t.length)return o["default"][0];if(1===t.length)return o["default"][t.charAt(0)];for(var r=t.split("").map(function(t){return parseInt(t)}),u=r.reverse(),f=[],a=0;a<u.length;a+=4)f.push(u.slice(a,a+4));return f.map(function(t,e){var n=t.map(function(t,e){var n=t>1||0===e&&1===t?o["default"][t]:"",r=t>0&&e>0?i["default"][0][e-1]:"";return n+r}).reduce(function(t,e){return e+t}),r=e>0&&n.length>0?i["default"][1][(e-1)%4]:"";return n+r}).filter(function(t){return t.length>0}).reduce(function(t,n){return n+(e||"")+t})};var u=n(11),o=r(u),f=n(12),i=r(f)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=["영","일","이","삼","사","오","육","칠","팔","구"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=[["십","백","천"],["만","억","조","경"]]}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiaGFuZ3VsLm1pbi5qcyIsIndlYnBhY2s6L3dlYnBhY2svYm9vdHN0cmFwIDkwMWYxNTI0OWNiYmUwN2RkNTVmIiwid2VicGFjazovLy9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3NyYy9pc0hhbmd1bC5qcyIsIndlYnBhY2s6Ly8vc3JjL2luaXRpYWwuanMiLCJ3ZWJwYWNrOi8vL3NyYy92YXJzL2luaXRpYWxDb25zb25hbnRzLmpzIiwid2VicGFjazovLy9zcmMvdm93ZWwuanMiLCJ3ZWJwYWNrOi8vL3NyYy92YXJzL3Zvd2Vscy5qcyIsIndlYnBhY2s6Ly8vc3JjL3VuZGVyLmpzIiwid2VicGFjazovLy9zcmMvdmFycy9maW5hbENvbnNvbmFudHMuanMiLCJ3ZWJwYWNrOi8vL3NyYy9oYXNVbmRlci5qcyIsIndlYnBhY2s6Ly8vc3JjL2hhc0xhc3RVbmRlci5qcyIsIndlYnBhY2s6Ly8vc3JjL2Zvcm1hdE51bWJlci5qcyIsIndlYnBhY2s6Ly8vc3JjL3ZhcnMvbnVtYmVycy5qcyIsIndlYnBhY2s6Ly8vc3JjL3ZhcnMvbGFyZ2VOdW1iZXJzLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfaXNIYW5ndWwiLCJfaXNIYW5ndWwyIiwiX2luaXRpYWwiLCJfaW5pdGlhbDIiLCJfdm93ZWwiLCJfdm93ZWwyIiwiX3VuZGVyIiwiX3VuZGVyMiIsIl9oYXNVbmRlciIsIl9oYXNVbmRlcjIiLCJfaGFzTGFzdFVuZGVyIiwiX2hhc0xhc3RVbmRlcjIiLCJfZm9ybWF0TnVtYmVyIiwiX2Zvcm1hdE51bWJlcjIiLCJpcyIsImluaXRpYWwiLCJ2b3dlbCIsInVuZGVyIiwiaGFzVW5kZXIiLCJoYXNMYXN0VW5kZXIiLCJmb3JtYXROdW1iZXIiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJpc0hhbmd1bCIsImxlbiIsInRvU3RyaW5nIiwiaGFuZ3VsSW5pdGlhbCIsImhhbmd1bFZvd2VsIiwiaGFuZ3VsVW5kZXIiLCJoYXNIYW5ndWxVbmRlciIsImhhc0xhc3RIYW5ndWxVbmRlciIsInRvSGFuZ3VsTnVtYmVyIiwiZGVsaW1pdGVyIiwiTnVtYmVyIiwidG9IYW5ndWwiLCJzdHIiLCJsZW5ndGgiLCJpIiwiY2hhckNvZGVBdCIsIl9pbml0aWFsQ29uc29uYW50czIiLCJwYXJzZUludCIsImNoYXJBdCIsIl9pbml0aWFsQ29uc29uYW50cyIsIl92b3dlbHMyIiwiX3Zvd2VscyIsIl9maW5hbENvbnNvbmFudHMyIiwiX2ZpbmFsQ29uc29uYW50cyIsIm51bWJlciIsIlR5cGVFcnJvciIsInRlc3QiLCJzdWJzdHJpbmciLCJfbnVtYmVyczIiLCJzcGxpdGVkTnVtYmVycyIsInNwbGl0IiwibWFwIiwiYSIsInJldmVyc2VkTnVtYmVycyIsInJldmVyc2UiLCJncm91cGVkTnVtYmVycyIsIl9pIiwicHVzaCIsInNsaWNlIiwibnVtcyIsImhudW1zIiwibiIsImoiLCJobnVtIiwidW5pdCIsIl9sYXJnZU51bWJlcnMyIiwicmVkdWNlIiwiYiIsImx1bml0IiwiZmlsdGVyIiwiX251bWJlcnMiLCJfbGFyZ2VOdW1iZXJzIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGdCQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxJQUNBLGtCQUFBRyxTQUFBQSxPQUFBQyxJQUNBRCxVQUFBSCxHQUNBLGdCQUFBQyxTQUNBQSxRQUFBLE9BQUFELElBRUFELEVBQUEs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QSxZYXJaRyxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxNYmdaRSxTQUFTQyxFQUFRRCxHYzVadkIsWWRnYUNtQixRQUFPQyxlQUFlcEIsRUFBUyxjQUMzQnFCLE9BQU8sSUFFWHJCLEVBQUFBLGFjaGFJLElBQUssSUFBSyxNQUNWLElBQUssSUFBSyxJQUFLIiwiZmlsZSI6Imhhbmd1bC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJoYW5ndWxcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiaGFuZ3VsXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uXG4gKiovIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiaGFuZ3VsXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImhhbmd1bFwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaXNIYW5ndWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9pc0hhbmd1bDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc0hhbmd1bCk7XG5cdFxuXHR2YXIgX2luaXRpYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9pbml0aWFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaXRpYWwpO1xuXHRcblx0dmFyIF92b3dlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3Zvd2VsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Zvd2VsKTtcblx0XG5cdHZhciBfdW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF91bmRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91bmRlcik7XG5cdFxuXHR2YXIgX2hhc1VuZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfaGFzVW5kZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFzVW5kZXIpO1xuXHRcblx0dmFyIF9oYXNMYXN0VW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIF9oYXNMYXN0VW5kZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFzTGFzdFVuZGVyKTtcblx0XG5cdHZhciBfZm9ybWF0TnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHR2YXIgX2Zvcm1hdE51bWJlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mb3JtYXROdW1iZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICAgIGlzOiBfaXNIYW5ndWwyLmRlZmF1bHQsXG5cdCAgICBpbml0aWFsOiBfaW5pdGlhbDIuZGVmYXVsdCxcblx0ICAgIHZvd2VsOiBfdm93ZWwyLmRlZmF1bHQsXG5cdCAgICB1bmRlcjogX3VuZGVyMi5kZWZhdWx0LFxuXHQgICAgaGFzVW5kZXI6IF9oYXNVbmRlcjIuZGVmYXVsdCxcblx0ICAgIGhhc0xhc3RVbmRlcjogX2hhc0xhc3RVbmRlcjIuZGVmYXVsdCxcblx0ICAgIGZvcm1hdE51bWJlcjogX2Zvcm1hdE51bWJlcjIuZGVmYXVsdFxuXHR9O1xuXHRcblx0XG5cdFN0cmluZy5wcm90b3R5cGUuaXNIYW5ndWwgPSBmdW5jdGlvbiAobGVuKSB7XG5cdCAgICByZXR1cm4gKDAsIF9pc0hhbmd1bDIuZGVmYXVsdCkodGhpcy50b1N0cmluZygpLCBsZW4pO1xuXHR9O1xuXHRcblx0U3RyaW5nLnByb3RvdHlwZS5oYW5ndWxJbml0aWFsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICgwLCBfaW5pdGlhbDIuZGVmYXVsdCkodGhpcy50b1N0cmluZygpKTtcblx0fTtcblx0XG5cdFN0cmluZy5wcm90b3R5cGUuaGFuZ3VsVm93ZWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gKDAsIF92b3dlbDIuZGVmYXVsdCkodGhpcy50b1N0cmluZygpKTtcblx0fTtcblx0XG5cdFN0cmluZy5wcm90b3R5cGUuaGFuZ3VsVW5kZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gKDAsIF91bmRlcjIuZGVmYXVsdCkodGhpcy50b1N0cmluZygpKTtcblx0fTtcblx0XG5cdFN0cmluZy5wcm90b3R5cGUuaGFzSGFuZ3VsVW5kZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gKDAsIF9oYXNVbmRlcjIuZGVmYXVsdCkodGhpcy50b1N0cmluZygpKTtcblx0fTtcblx0XG5cdFN0cmluZy5wcm90b3R5cGUuaGFzTGFzdEhhbmd1bFVuZGVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICgwLCBfaGFzTGFzdFVuZGVyMi5kZWZhdWx0KSh0aGlzLnRvU3RyaW5nKCkpO1xuXHR9O1xuXHRcblx0U3RyaW5nLnByb3RvdHlwZS50b0hhbmd1bE51bWJlciA9IGZ1bmN0aW9uIChkZWxpbWl0ZXIpIHtcblx0ICAgIHJldHVybiAoMCwgX2Zvcm1hdE51bWJlcjIuZGVmYXVsdCkodGhpcy50b1N0cmluZygpLCBkZWxpbWl0ZXIpO1xuXHR9O1xuXHRcblx0TnVtYmVyLnByb3RvdHlwZS50b0hhbmd1bCA9IGZ1bmN0aW9uIChkZWxpbWl0ZXIpIHtcblx0ICAgIHJldHVybiAoMCwgX2Zvcm1hdE51bWJlcjIuZGVmYXVsdCkodGhpcy50b1N0cmluZygpLCBkZWxpbWl0ZXIpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiDrrLjsnpDsl7TsnbQg7ZWc6riA7J247KeAIOqygOyCrO2VnOuLpFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc3RyIOusuOyekOyXtFxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2xlbl0g6rKA7IKs6ri47J20XG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59IOqygOyCrOqysOqzvFxuXHQgKi9cblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc3RyLCBsZW4pIHtcblx0ICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyB8fCBzdHIubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgaWYgKCFsZW4gfHwgbGVuIDwgMCB8fCBsZW4gPiBzdHIubGVuZ3RoKSB7XG5cdCAgICAgICAgbGVuID0gc3RyLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHQgICAgICAgIGlmIChjIDwgMHhBQzAwIHx8IGMgPiAweEQ3QTMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0cnVlO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdHIpIHtcblx0ICAgIGlmICghKDAsIF9pc0hhbmd1bDIuZGVmYXVsdCkoc3RyLCAxKSkge1xuXHQgICAgICAgIHJldHVybiB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyA/IHN0ci5jaGFyQXQoMCkgOiBzdHI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2luaXRpYWxDb25zb25hbnRzMi5kZWZhdWx0W3BhcnNlSW50KCgoc3RyLmNoYXJDb2RlQXQoMCkgJiAweEZGRkYpIC0gMHhBQzAwKSAvICgyMSAqIDI4KSldO1xuXHR9O1xuXHRcblx0dmFyIF9pc0hhbmd1bCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2lzSGFuZ3VsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzSGFuZ3VsKTtcblx0XG5cdHZhciBfaW5pdGlhbENvbnNvbmFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9pbml0aWFsQ29uc29uYW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbml0aWFsQ29uc29uYW50cyk7XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFsn44SxJywgJ+OEsicsICfjhLQnLCAn44S3JywgJ+OEuCcsICfjhLknLCAn44WBJywgJ+OFgicsICfjhYMnLCAn44WFJywgJ+OFhicsICfjhYcnLCAn44WIJywgJ+OFiScsICfjhYonLCAn44WLJywgJ+OFjCcsICfjhY0nLCAn44WOJ107XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHN0cikge1xuXHQgICAgaWYgKCEoMCwgX2lzSGFuZ3VsMi5kZWZhdWx0KShzdHIsIDEpKSB7XG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnID8gc3RyLmNoYXJBdCgwKSA6IHN0cjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfdm93ZWxzMi5kZWZhdWx0W3BhcnNlSW50KCgoc3RyLmNoYXJDb2RlQXQoMCkgJiAweEZGRkYpIC0gMHhBQzAwKSAlICgyMSAqIDI4KSAvIDI4KV07XG5cdH07XG5cdFxuXHR2YXIgX2lzSGFuZ3VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfaXNIYW5ndWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNIYW5ndWwpO1xuXHRcblx0dmFyIF92b3dlbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF92b3dlbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdm93ZWxzKTtcblxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gWyfjhY8nLCAn44WQJywgJ+OFkScsICfjhZInLCAn44WTJywgJ+OFlCcsICfjhZUnLCAn44WWJywgJ+OFlycsICfjhZgnLCAn44WZJywgJ+OFmicsICfjhZsnLCAn44WcJywgJ+OFnScsICfjhZ4nLCAn44WfJywgJ+OFoCcsICfjhaEnLCAn44WiJywgJ+OFoyddO1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdHIpIHtcblx0ICAgIGlmICghKDAsIF9pc0hhbmd1bDIuZGVmYXVsdCkoc3RyLCAxKSkge1xuXHQgICAgICAgIHJldHVybiB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyA/IHN0ci5jaGFyQXQoMCkgOiBzdHI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2ZpbmFsQ29uc29uYW50czIuZGVmYXVsdFtwYXJzZUludCgoKHN0ci5jaGFyQ29kZUF0KDApICYgMHhGRkZGKSAtIDB4QUMwMCkgJSAoMjEgKiAyOCkgJSAyOCldO1xuXHR9O1xuXHRcblx0dmFyIF9pc0hhbmd1bCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2lzSGFuZ3VsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzSGFuZ3VsKTtcblx0XG5cdHZhciBfZmluYWxDb25zb25hbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfZmluYWxDb25zb25hbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbmFsQ29uc29uYW50cyk7XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFsnJywgJ+OEsScsICfjhLInLCAn44SzJywgJ+OEtCcsICfjhLUnLCAn44S2JywgJ+OEtycsICfjhLknLCAn44S6JywgJ+OEuycsICfjhLwnLCAn44S9JywgJ+OEvicsICfjhL8nLCAn44WAJywgJ+OFgScsICfjhYInLCAn44WEJywgJ+OFhScsICfjhYYnLCAn44WHJywgJ+OFiCcsICfjhYonLCAn44WLJywgJ+OFjCcsICfjhY0nLCAn44WOJ107XG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdHIpIHtcblx0ICByZXR1cm4gKDAsIF9pc0hhbmd1bDIuZGVmYXVsdCkoc3RyLCAxKSAmJiAoMCwgX3VuZGVyMi5kZWZhdWx0KShzdHIpICE9PSAnJztcblx0fTtcblx0XG5cdHZhciBfaXNIYW5ndWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9pc0hhbmd1bDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc0hhbmd1bCk7XG5cdFxuXHR2YXIgX3VuZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfdW5kZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5kZXIpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHN0cikge1xuXHQgICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnIHx8IHN0ci5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gKDAsIF9oYXNVbmRlcjIuZGVmYXVsdCkoc3RyLmNoYXJBdChzdHIubGVuZ3RoIC0gMSkpO1xuXHR9O1xuXHRcblx0dmFyIF9oYXNVbmRlciA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX2hhc1VuZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc1VuZGVyKTtcblxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAobnVtYmVyLCBkZWxpbWl0ZXIpIHtcblx0ICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCInbnVtYmVyJyBpcyB1bmRlZmluZWRcIik7XG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIG51bWJlciAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBudW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKTtcblx0ICAgIH1cblx0ICAgIGlmICghL15bMC05XSskLy50ZXN0KG51bWJlcikpIHtcblx0ICAgICAgICByZXR1cm4gbnVtYmVyO1xuXHQgICAgfVxuXHQgICAgaWYgKG51bWJlci5jaGFyQXQoMCkgPT09ICcwJykge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbnVtYmVyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGlmIChudW1iZXIuY2hhckF0KGkpID09PSAnMCcpIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIG51bWJlciA9IG51bWJlci5zdWJzdHJpbmcoaSk7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChudW1iZXIubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIF9udW1iZXJzMi5kZWZhdWx0WzBdO1xuXHQgICAgfVxuXHQgICAgaWYgKG51bWJlci5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4gX251bWJlcnMyLmRlZmF1bHRbbnVtYmVyLmNoYXJBdCgwKV07XG5cdCAgICB9XG5cdCAgICB2YXIgc3BsaXRlZE51bWJlcnMgPSBudW1iZXIuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoYSkge1xuXHQgICAgICAgIHJldHVybiBwYXJzZUludChhKTtcblx0ICAgIH0pO1xuXHQgICAgdmFyIHJldmVyc2VkTnVtYmVycyA9IHNwbGl0ZWROdW1iZXJzLnJldmVyc2UoKTtcblx0ICAgIHZhciBncm91cGVkTnVtYmVycyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHJldmVyc2VkTnVtYmVycy5sZW5ndGg7IF9pICs9IDQpIHtcblx0ICAgICAgICBncm91cGVkTnVtYmVycy5wdXNoKHJldmVyc2VkTnVtYmVycy5zbGljZShfaSwgX2kgKyA0KSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZ3JvdXBlZE51bWJlcnMubWFwKGZ1bmN0aW9uIChudW1zLCBpKSB7XG5cdCAgICAgICAgdmFyIGhudW1zID0gbnVtcy5tYXAoZnVuY3Rpb24gKG4sIGopIHtcblx0ICAgICAgICAgICAgdmFyIGhudW0gPSBuID4gMSB8fCBqID09PSAwICYmIG4gPT09IDEgPyBfbnVtYmVyczIuZGVmYXVsdFtuXSA6ICcnO1xuXHQgICAgICAgICAgICB2YXIgdW5pdCA9IG4gPiAwICYmIGogPiAwID8gX2xhcmdlTnVtYmVyczIuZGVmYXVsdFswXVtqIC0gMV0gOiAnJztcblx0ICAgICAgICAgICAgcmV0dXJuIGhudW0gKyB1bml0O1xuXHQgICAgICAgIH0pLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICAgICAgICByZXR1cm4gYiArIGE7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIGx1bml0ID0gaSA+IDAgJiYgaG51bXMubGVuZ3RoID4gMCA/IF9sYXJnZU51bWJlcnMyLmRlZmF1bHRbMV1bKGkgLSAxKSAlIDRdIDogJyc7XG5cdCAgICAgICAgcmV0dXJuIGhudW1zICsgbHVuaXQ7XG5cdCAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGEpIHtcblx0ICAgICAgICByZXR1cm4gYS5sZW5ndGggPiAwO1xuXHQgICAgfSkucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgICAgcmV0dXJuIGIgKyAoZGVsaW1pdGVyIHx8ICcnKSArIGE7XG5cdCAgICB9KTtcblx0fTtcblx0XG5cdHZhciBfbnVtYmVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9udW1iZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX251bWJlcnMpO1xuXHRcblx0dmFyIF9sYXJnZU51bWJlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfbGFyZ2VOdW1iZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xhcmdlTnVtYmVycyk7XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBbJ+yYgScsICfsnbwnLCAn7J20JywgJ+yCvCcsICfsgqwnLCAn7JikJywgJ+ycoScsICfsuaAnLCAn7YyUJywgJ+q1rCddO1xuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFtbJ+yLrScsICfrsLEnLCAn7LKcJ10sIFsn66eMJywgJ+yWtScsICfsobAnLCAn6rK9J11dO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKVxufSk7XG47XG4iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDkwMWYxNTI0OWNiYmUwN2RkNTVmXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgaXNIYW5ndWwgZnJvbSAnLi9pc0hhbmd1bCdcbmltcG9ydCBpbml0aWFsIGZyb20gJy4vaW5pdGlhbCdcbmltcG9ydCB2b3dlbCBmcm9tICcuL3Zvd2VsJ1xuaW1wb3J0IHVuZGVyIGZyb20gJy4vdW5kZXInXG5pbXBvcnQgaGFzVW5kZXIgZnJvbSAnLi9oYXNVbmRlcidcbmltcG9ydCBoYXNMYXN0VW5kZXIgZnJvbSAnLi9oYXNMYXN0VW5kZXInXG5pbXBvcnQgZm9ybWF0TnVtYmVyIGZyb20gJy4vZm9ybWF0TnVtYmVyJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgaXM6IGlzSGFuZ3VsLFxuICAgIGluaXRpYWw6IGluaXRpYWwsXG4gICAgdm93ZWw6IHZvd2VsLFxuICAgIHVuZGVyOiB1bmRlcixcbiAgICBoYXNVbmRlcjogaGFzVW5kZXIsXG4gICAgaGFzTGFzdFVuZGVyOiBoYXNMYXN0VW5kZXIsXG4gICAgZm9ybWF0TnVtYmVyOiBmb3JtYXROdW1iZXJcbn07XG5cblN0cmluZy5wcm90b3R5cGUuaXNIYW5ndWwgPSBmdW5jdGlvbihsZW4pIHtcbiAgICByZXR1cm4gaXNIYW5ndWwodGhpcy50b1N0cmluZygpLCBsZW4pO1xufTtcblxuU3RyaW5nLnByb3RvdHlwZS5oYW5ndWxJbml0aWFsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGluaXRpYWwodGhpcy50b1N0cmluZygpKTtcbn07XG5cblN0cmluZy5wcm90b3R5cGUuaGFuZ3VsVm93ZWwgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdm93ZWwodGhpcy50b1N0cmluZygpKTtcbn07XG5cblN0cmluZy5wcm90b3R5cGUuaGFuZ3VsVW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdW5kZXIodGhpcy50b1N0cmluZygpKTtcbn07XG5cblN0cmluZy5wcm90b3R5cGUuaGFzSGFuZ3VsVW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGFzVW5kZXIodGhpcy50b1N0cmluZygpKTtcbn07XG5cblN0cmluZy5wcm90b3R5cGUuaGFzTGFzdEhhbmd1bFVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGhhc0xhc3RVbmRlcih0aGlzLnRvU3RyaW5nKCkpO1xufTtcblxuU3RyaW5nLnByb3RvdHlwZS50b0hhbmd1bE51bWJlciA9IGZ1bmN0aW9uKGRlbGltaXRlcikge1xuICAgIHJldHVybiBmb3JtYXROdW1iZXIodGhpcy50b1N0cmluZygpLCBkZWxpbWl0ZXIpO1xufTtcblxuTnVtYmVyLnByb3RvdHlwZS50b0hhbmd1bCA9IGZ1bmN0aW9uKGRlbGltaXRlcikge1xuICAgIHJldHVybiBmb3JtYXROdW1iZXIodGhpcy50b1N0cmluZygpLCBkZWxpbWl0ZXIpO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2luZGV4LmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiDrrLjsnpDsl7TsnbQg7ZWc6riA7J247KeAIOqygOyCrO2VnOuLpFxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciDrrLjsnpDsl7RcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuXSDqsoDsgqzquLjsnbRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IOqygOyCrOqysOqzvFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdHIsIGxlbikge1xuICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyB8fCBzdHIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFsZW4gfHwgbGVuIDwgMCB8fCBsZW4gPiBzdHIubGVuZ3RoKSB7XG4gICAgICAgIGxlbiA9IHN0ci5sZW5ndGg7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGMgPCAweEFDMDAgfHwgYyA+IDB4RDdBMykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvaXNIYW5ndWwuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBpc0hhbmd1bCBmcm9tICcuL2lzSGFuZ3VsJ1xuaW1wb3J0IElOSVRJQUxfQ09OU09OQU5UUyBmcm9tICcuL3ZhcnMvaW5pdGlhbENvbnNvbmFudHMnXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIO2VnOq4gCDtlZzrrLjsnpDsl5DshJwg7LSI7ISx7J2EIOu2hOumrO2VtOyEnCDqsIDsoLjsmKjri6RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIg66y47J6QXG4gKiBAcmV0dXJuIHtzdHJpbmd9IOy0iOyEsVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAoIWlzSGFuZ3VsKHN0ciwgMSkpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnID8gc3RyLmNoYXJBdCgwKSA6IHN0cjtcbiAgICB9XG4gICAgcmV0dXJuIElOSVRJQUxfQ09OU09OQU5UU1twYXJzZUludCgoKHN0ci5jaGFyQ29kZUF0KDApICYgMHhGRkZGKSAtIDB4QUMwMCkgLyAoMjEgKiAyOCkpXTtcbn1cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2luaXRpYWwuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAgICAn44SxJyxcbiAgICAn44SyJyxcbiAgICAn44S0JyxcbiAgICAn44S3JyxcbiAgICAn44S4JyxcbiAgICAn44S5JyxcbiAgICAn44WBJyxcbiAgICAn44WCJyxcbiAgICAn44WDJyxcbiAgICAn44WFJyxcbiAgICAn44WGJyxcbiAgICAn44WHJyxcbiAgICAn44WIJyxcbiAgICAn44WJJyxcbiAgICAn44WKJyxcbiAgICAn44WLJyxcbiAgICAn44WMJyxcbiAgICAn44WNJyxcbiAgICAn44WOJ1xuXTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3ZhcnMvaW5pdGlhbENvbnNvbmFudHMuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBpc0hhbmd1bCBmcm9tICcuL2lzSGFuZ3VsJ1xuaW1wb3J0IFZPV0VMUyBmcm9tICcuL3ZhcnMvdm93ZWxzJ1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiDtlZzquIAg7ZWc66y47J6Q7JeQ7IScIOykkeyEseydhCDrtoTrpqztlbTshJwg6rCA7KC47Jio64ukXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIOusuOyekFxuICogQHJldHVybiB7c3RyaW5nfSDspJHshLFcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc3RyKSB7XG4gICAgaWYgKCFpc0hhbmd1bChzdHIsIDEpKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyA/IHN0ci5jaGFyQXQoMCkgOiBzdHI7XG4gICAgfVxuICAgIHJldHVybiBWT1dFTFNbcGFyc2VJbnQoKCgoc3RyLmNoYXJDb2RlQXQoMCkgJiAweEZGRkYpIC0gMHhBQzAwKSAlICgyMSAqIDI4KSkgLyAyOCldO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvdm93ZWwuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAgICAn44WPJyxcbiAgICAn44WQJyxcbiAgICAn44WRJyxcbiAgICAn44WSJyxcbiAgICAn44WTJyxcbiAgICAn44WUJyxcbiAgICAn44WVJyxcbiAgICAn44WWJyxcbiAgICAn44WXJyxcbiAgICAn44WYJyxcbiAgICAn44WZJyxcbiAgICAn44WaJyxcbiAgICAn44WbJyxcbiAgICAn44WcJyxcbiAgICAn44WdJyxcbiAgICAn44WeJyxcbiAgICAn44WfJyxcbiAgICAn44WgJyxcbiAgICAn44WhJyxcbiAgICAn44WiJyxcbiAgICAn44WjJ1xuXTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3ZhcnMvdm93ZWxzLmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgaXNIYW5ndWwgZnJvbSAnLi9pc0hhbmd1bCdcbmltcG9ydCBGSU5BTF9DT05TT05BTlRTIGZyb20gJy4vdmFycy9maW5hbENvbnNvbmFudHMnXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIO2VnOq4gCDtlZzrrLjsnpDsl5DshJwg7KKF7ISx7J2EIOu2hOumrO2VtOyEnCDqsIDsoLjsmKjri6RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIg66y47J6QXG4gKiBAcmV0dXJuIHtzdHJpbmd9IOyiheyEsVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAoIWlzSGFuZ3VsKHN0ciwgMSkpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnID8gc3RyLmNoYXJBdCgwKSA6IHN0cjtcbiAgICB9XG4gICAgcmV0dXJuIEZJTkFMX0NPTlNPTkFOVFNbcGFyc2VJbnQoKCgoc3RyLmNoYXJDb2RlQXQoMCkgJiAweEZGRkYpIC0gMHhBQzAwKSAlICgyMSAqIDI4KSkgJSAyOCldO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvdW5kZXIuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAgICAnJyxcbiAgICAn44SxJyxcbiAgICAn44SyJyxcbiAgICAn44SzJyxcbiAgICAn44S0JyxcbiAgICAn44S1JyxcbiAgICAn44S2JyxcbiAgICAn44S3JyxcbiAgICAn44S5JyxcbiAgICAn44S6JyxcbiAgICAn44S7JyxcbiAgICAn44S8JyxcbiAgICAn44S9JyxcbiAgICAn44S+JyxcbiAgICAn44S/JyxcbiAgICAn44WAJyxcbiAgICAn44WBJyxcbiAgICAn44WCJyxcbiAgICAn44WEJyxcbiAgICAn44WFJyxcbiAgICAn44WGJyxcbiAgICAn44WHJyxcbiAgICAn44WIJyxcbiAgICAn44WKJyxcbiAgICAn44WLJyxcbiAgICAn44WMJyxcbiAgICAn44WNJyxcbiAgICAn44WOJ1xuXTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3ZhcnMvZmluYWxDb25zb25hbnRzLmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgaXNIYW5ndWwgZnJvbSAnLi9pc0hhbmd1bCdcbmltcG9ydCB1bmRlciBmcm9tICcuL3VuZGVyJ1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiDtlZzrrLjsnpDsnZgg7KKF7ISx7J2YIOycoOustOulvCDqsoDsgqztlZzri6RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIg66y47J6QXG4gKiBAcmV0dXJuIHtib29sZWFufSDsooXshLHsnZgg7Jyg66y0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBpc0hhbmd1bChzdHIsIDEpICYmIHVuZGVyKHN0cikgIT09ICcnO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvaGFzVW5kZXIuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBoYXNVbmRlciBmcm9tICcuL2hhc1VuZGVyJ1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiDrrLjsnpDsl7TsnZgg66eI7KeA66eJIOusuOyekOydmCDsooXshLEg7Jyg66y066W8IOqygOyCrO2VnOuLpFxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciDrrLjsnpDsl7RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IOuniOyngOuniSDrrLjsnpDsnZgg7KKF7ISxIOycoOustFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycgfHwgc3RyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBoYXNVbmRlcihzdHIuY2hhckF0KHN0ci5sZW5ndGggLSAxKSk7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9oYXNMYXN0VW5kZXIuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBOVU1CRVJTIGZyb20gJy4vdmFycy9udW1iZXJzJ1xuaW1wb3J0IExBUkdFX05VTUJFUlMgZnJvbSAnLi92YXJzL2xhcmdlTnVtYmVycydcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24g7Iir7J6Q66W8IO2VnOq4gO2YleyLneycvOuhnCDrsJTqv5TspIDri6RcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gbnVtYmVyIOyIq+yekFxuICogQHBhcmFtIHtzdHJpbmd9IFtkZWxpbWl0ZXJdIOuLqOychCDqtazrtoTsnpBcbiAqIEByZXR1cm4ge3N0cmluZ30g7ZWc6riA7Iir7J6QXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG51bWJlciwgZGVsaW1pdGVyKSB7XG4gICAgaWYgKHR5cGVvZiBudW1iZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCInbnVtYmVyJyBpcyB1bmRlZmluZWRcIik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbnVtYmVyICE9PSAnc3RyaW5nJykge1xuICAgICAgICBudW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKCEvXlswLTldKyQvLnRlc3QobnVtYmVyKSkge1xuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgICBpZiAobnVtYmVyLmNoYXJBdCgwKSA9PT0gJzAnKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbnVtYmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobnVtYmVyLmNoYXJBdChpKSA9PT0gJzAnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBudW1iZXIgPSBudW1iZXIuc3Vic3RyaW5nKGkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG51bWJlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5VTUJFUlNbMF07XG4gICAgfVxuICAgIGlmIChudW1iZXIubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBOVU1CRVJTW251bWJlci5jaGFyQXQoMCldO1xuICAgIH1cbiAgICBsZXQgc3BsaXRlZE51bWJlcnMgPSBudW1iZXIuc3BsaXQoJycpLm1hcChhID0+IHBhcnNlSW50KGEpKTtcbiAgICBsZXQgcmV2ZXJzZWROdW1iZXJzID0gc3BsaXRlZE51bWJlcnMucmV2ZXJzZSgpO1xuICAgIGxldCBncm91cGVkTnVtYmVycyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmV2ZXJzZWROdW1iZXJzLmxlbmd0aDsgaSArPSA0KSB7XG4gICAgICAgIGdyb3VwZWROdW1iZXJzLnB1c2gocmV2ZXJzZWROdW1iZXJzLnNsaWNlKGksIGkgKyA0KSk7XG4gICAgfVxuICAgIHJldHVybiBncm91cGVkTnVtYmVycy5tYXAoKG51bXMsIGkpID0+IHtcbiAgICAgICAgbGV0IGhudW1zID0gbnVtcy5tYXAoKG4sIGopID0+IHtcbiAgICAgICAgICAgIGxldCBobnVtID0gKG4gPiAxIHx8IGogPT09IDAgJiYgbiA9PT0gMSkgPyBOVU1CRVJTW25dIDogJyc7XG4gICAgICAgICAgICBsZXQgdW5pdCA9IChuID4gMCAmJiBqID4gMCkgPyBMQVJHRV9OVU1CRVJTWzBdW2ogLSAxXSA6ICcnO1xuICAgICAgICAgICAgcmV0dXJuIGhudW0gKyB1bml0O1xuICAgICAgICB9KS5yZWR1Y2UoKGEsIGIpID0+IGIgKyBhKTtcbiAgICAgICAgbGV0IGx1bml0ID0gKGkgPiAwICYmIGhudW1zLmxlbmd0aCA+IDApID8gTEFSR0VfTlVNQkVSU1sxXVsoaSAtIDEpICUgNF0gOiAnJztcbiAgICAgICAgcmV0dXJuIGhudW1zICsgbHVuaXQ7XG4gICAgfSkuZmlsdGVyKGEgPT4gYS5sZW5ndGggPiAwKS5yZWR1Y2UoKGEsIGIpID0+IGIgKyAoZGVsaW1pdGVyIHx8ICcnKSArIGEpO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZm9ybWF0TnVtYmVyLmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBbXG4gICAgJ+yYgScsXG4gICAgJ+ydvCcsXG4gICAgJ+ydtCcsXG4gICAgJ+yCvCcsXG4gICAgJ+yCrCcsXG4gICAgJ+yYpCcsXG4gICAgJ+ycoScsXG4gICAgJ+y5oCcsXG4gICAgJ+2MlCcsXG4gICAgJ+q1rCdcbl07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy92YXJzL251bWJlcnMuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAgICBbJ+yLrScsICfrsLEnLCAn7LKcJ10sXG4gICAgWyfrp4wnLCAn7Ja1JywgJ+yhsCcsICfqsr0nXVxuXTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3ZhcnMvbGFyZ2VOdW1iZXJzLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
